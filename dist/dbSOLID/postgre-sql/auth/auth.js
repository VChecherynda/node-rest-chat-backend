"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = buildAuthDataAccess;

function buildAuthDataAccess({
  connectDb,
  model
}) {
  async function findOne({
    userTwoId = ""
  } = {}) {
    const db = await connectDb();
    const query = {
      where: {
        userTwoId: Number(userTwoId)
      },
      attributes: ["id", "userOneId", "userTwoId"]
    };
    const result = await db.collection("user").findOne(query);
    const {
      id
    } = result;
    return {
      id
    };
  }

  async function findAll() {
    const db = await connectDb();
    const query = {
      attributes: ["id", "userOneId", "userTwoId"]
    };
    const result = await db.collection("user").findAll(query);
    return result;
  }

  async function create(data) {
    const db = await connectDb();
    const result = await db.collection("user").create(data);
    return result;
  }

  return Object.freeze({
    findOne,
    findAll,
    create
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9kYlNPTElEL3Bvc3RncmUtc3FsL2F1dGgvYXV0aC5qcyJdLCJuYW1lcyI6WyJidWlsZEF1dGhEYXRhQWNjZXNzIiwiY29ubmVjdERiIiwibW9kZWwiLCJmaW5kT25lIiwidXNlclR3b0lkIiwiZGIiLCJxdWVyeSIsIndoZXJlIiwiTnVtYmVyIiwiYXR0cmlidXRlcyIsInJlc3VsdCIsImNvbGxlY3Rpb24iLCJpZCIsImZpbmRBbGwiLCJjcmVhdGUiLCJkYXRhIiwiT2JqZWN0IiwiZnJlZXplIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWUsU0FBU0EsbUJBQVQsQ0FBNkI7QUFBRUMsRUFBQUEsU0FBRjtBQUFhQyxFQUFBQTtBQUFiLENBQTdCLEVBQW1EO0FBQ2hFLGlCQUFlQyxPQUFmLENBQXVCO0FBQUVDLElBQUFBLFNBQVMsR0FBRztBQUFkLE1BQXFCLEVBQTVDLEVBQWdEO0FBQzlDLFVBQU1DLEVBQUUsR0FBRyxNQUFNSixTQUFTLEVBQTFCO0FBRUEsVUFBTUssS0FBSyxHQUFHO0FBQ1pDLE1BQUFBLEtBQUssRUFBRTtBQUNMSCxRQUFBQSxTQUFTLEVBQUVJLE1BQU0sQ0FBQ0osU0FBRDtBQURaLE9BREs7QUFJWkssTUFBQUEsVUFBVSxFQUFFLENBQUMsSUFBRCxFQUFPLFdBQVAsRUFBb0IsV0FBcEI7QUFKQSxLQUFkO0FBT0EsVUFBTUMsTUFBTSxHQUFHLE1BQU1MLEVBQUUsQ0FBQ00sVUFBSCxDQUFjLE1BQWQsRUFBc0JSLE9BQXRCLENBQThCRyxLQUE5QixDQUFyQjtBQUNBLFVBQU07QUFBRU0sTUFBQUE7QUFBRixRQUFTRixNQUFmO0FBQ0EsV0FBTztBQUFFRSxNQUFBQTtBQUFGLEtBQVA7QUFDRDs7QUFFRCxpQkFBZUMsT0FBZixHQUF5QjtBQUN2QixVQUFNUixFQUFFLEdBQUcsTUFBTUosU0FBUyxFQUExQjtBQUVBLFVBQU1LLEtBQUssR0FBRztBQUNaRyxNQUFBQSxVQUFVLEVBQUUsQ0FBQyxJQUFELEVBQU8sV0FBUCxFQUFvQixXQUFwQjtBQURBLEtBQWQ7QUFJQSxVQUFNQyxNQUFNLEdBQUcsTUFBTUwsRUFBRSxDQUFDTSxVQUFILENBQWMsTUFBZCxFQUFzQkUsT0FBdEIsQ0FBOEJQLEtBQTlCLENBQXJCO0FBQ0EsV0FBT0ksTUFBUDtBQUNEOztBQUVELGlCQUFlSSxNQUFmLENBQXNCQyxJQUF0QixFQUE0QjtBQUMxQixVQUFNVixFQUFFLEdBQUcsTUFBTUosU0FBUyxFQUExQjtBQUVBLFVBQU1TLE1BQU0sR0FBRyxNQUFNTCxFQUFFLENBQUNNLFVBQUgsQ0FBYyxNQUFkLEVBQXNCRyxNQUF0QixDQUE2QkMsSUFBN0IsQ0FBckI7QUFDQSxXQUFPTCxNQUFQO0FBQ0Q7O0FBRUQsU0FBT00sTUFBTSxDQUFDQyxNQUFQLENBQWM7QUFDbkJkLElBQUFBLE9BRG1CO0FBRW5CVSxJQUFBQSxPQUZtQjtBQUduQkMsSUFBQUE7QUFIbUIsR0FBZCxDQUFQO0FBS0QiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBidWlsZEF1dGhEYXRhQWNjZXNzKHsgY29ubmVjdERiLCBtb2RlbCB9KSB7XG4gIGFzeW5jIGZ1bmN0aW9uIGZpbmRPbmUoeyB1c2VyVHdvSWQgPSBcIlwiIH0gPSB7fSkge1xuICAgIGNvbnN0IGRiID0gYXdhaXQgY29ubmVjdERiKCk7XG5cbiAgICBjb25zdCBxdWVyeSA9IHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHVzZXJUd29JZDogTnVtYmVyKHVzZXJUd29JZClcbiAgICAgIH0sXG4gICAgICBhdHRyaWJ1dGVzOiBbXCJpZFwiLCBcInVzZXJPbmVJZFwiLCBcInVzZXJUd29JZFwiXVxuICAgIH07XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKFwidXNlclwiKS5maW5kT25lKHF1ZXJ5KTtcbiAgICBjb25zdCB7IGlkIH0gPSByZXN1bHQ7XG4gICAgcmV0dXJuIHsgaWQgfTtcbiAgfVxuXG4gIGFzeW5jIGZ1bmN0aW9uIGZpbmRBbGwoKSB7XG4gICAgY29uc3QgZGIgPSBhd2FpdCBjb25uZWN0RGIoKTtcblxuICAgIGNvbnN0IHF1ZXJ5ID0ge1xuICAgICAgYXR0cmlidXRlczogW1wiaWRcIiwgXCJ1c2VyT25lSWRcIiwgXCJ1c2VyVHdvSWRcIl1cbiAgICB9O1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGIuY29sbGVjdGlvbihcInVzZXJcIikuZmluZEFsbChxdWVyeSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZShkYXRhKSB7XG4gICAgY29uc3QgZGIgPSBhd2FpdCBjb25uZWN0RGIoKTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJ1c2VyXCIpLmNyZWF0ZShkYXRhKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcmV0dXJuIE9iamVjdC5mcmVlemUoe1xuICAgIGZpbmRPbmUsXG4gICAgZmluZEFsbCxcbiAgICBjcmVhdGVcbiAgfSk7XG59XG4iXX0=