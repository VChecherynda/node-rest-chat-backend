"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = makeMessageDb;

function makeMessageDb({
  makeDb
}) {
  async function findOne({
    userTwoId = ""
  } = {}) {
    const db = await makeDb();
    const query = {
      where: {
        userTwoId: Number(userTwoId)
      },
      attributes: ["id", "userOneId", "userTwoId"]
    };
    const result = await db.collection("conversations").findOne(query);
    const {
      id
    } = result;
    return {
      id
    };
  }

  async function findAll() {
    const db = await makeDb();
    const query = {
      attributes: ["id", "userOneId", "userTwoId"]
    };
    const result = await db.collection("conversations").findAll(query);
    return result;
  }

  return Object.freeze({
    findOne,
    findAll
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9kYlNPTElEL3Bvc3RncmUtc3FsL21lc3NhZ2UvbWVzc2FnZS5qcyJdLCJuYW1lcyI6WyJtYWtlTWVzc2FnZURiIiwibWFrZURiIiwiZmluZE9uZSIsInVzZXJUd29JZCIsImRiIiwicXVlcnkiLCJ3aGVyZSIsIk51bWJlciIsImF0dHJpYnV0ZXMiLCJyZXN1bHQiLCJjb2xsZWN0aW9uIiwiaWQiLCJmaW5kQWxsIiwiT2JqZWN0IiwiZnJlZXplIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWUsU0FBU0EsYUFBVCxDQUF1QjtBQUFFQyxFQUFBQTtBQUFGLENBQXZCLEVBQW1DO0FBQ2hELGlCQUFlQyxPQUFmLENBQXVCO0FBQUVDLElBQUFBLFNBQVMsR0FBRztBQUFkLE1BQXFCLEVBQTVDLEVBQWdEO0FBQzlDLFVBQU1DLEVBQUUsR0FBRyxNQUFNSCxNQUFNLEVBQXZCO0FBRUEsVUFBTUksS0FBSyxHQUFHO0FBQ1pDLE1BQUFBLEtBQUssRUFBRTtBQUNMSCxRQUFBQSxTQUFTLEVBQUVJLE1BQU0sQ0FBQ0osU0FBRDtBQURaLE9BREs7QUFJWkssTUFBQUEsVUFBVSxFQUFFLENBQUMsSUFBRCxFQUFPLFdBQVAsRUFBb0IsV0FBcEI7QUFKQSxLQUFkO0FBT0EsVUFBTUMsTUFBTSxHQUFHLE1BQU1MLEVBQUUsQ0FBQ00sVUFBSCxDQUFjLGVBQWQsRUFBK0JSLE9BQS9CLENBQXVDRyxLQUF2QyxDQUFyQjtBQUNBLFVBQU07QUFBRU0sTUFBQUE7QUFBRixRQUFTRixNQUFmO0FBQ0EsV0FBTztBQUFFRSxNQUFBQTtBQUFGLEtBQVA7QUFDRDs7QUFFRCxpQkFBZUMsT0FBZixHQUF5QjtBQUN2QixVQUFNUixFQUFFLEdBQUcsTUFBTUgsTUFBTSxFQUF2QjtBQUVBLFVBQU1JLEtBQUssR0FBRztBQUNaRyxNQUFBQSxVQUFVLEVBQUUsQ0FBQyxJQUFELEVBQU8sV0FBUCxFQUFvQixXQUFwQjtBQURBLEtBQWQ7QUFJQSxVQUFNQyxNQUFNLEdBQUcsTUFBTUwsRUFBRSxDQUFDTSxVQUFILENBQWMsZUFBZCxFQUErQkUsT0FBL0IsQ0FBdUNQLEtBQXZDLENBQXJCO0FBQ0EsV0FBT0ksTUFBUDtBQUNEOztBQUVELFNBQU9JLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjO0FBQ25CWixJQUFBQSxPQURtQjtBQUVuQlUsSUFBQUE7QUFGbUIsR0FBZCxDQUFQO0FBSUQiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtYWtlTWVzc2FnZURiKHsgbWFrZURiIH0pIHtcbiAgYXN5bmMgZnVuY3Rpb24gZmluZE9uZSh7IHVzZXJUd29JZCA9IFwiXCIgfSA9IHt9KSB7XG4gICAgY29uc3QgZGIgPSBhd2FpdCBtYWtlRGIoKTtcblxuICAgIGNvbnN0IHF1ZXJ5ID0ge1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgdXNlclR3b0lkOiBOdW1iZXIodXNlclR3b0lkKVxuICAgICAgfSxcbiAgICAgIGF0dHJpYnV0ZXM6IFtcImlkXCIsIFwidXNlck9uZUlkXCIsIFwidXNlclR3b0lkXCJdXG4gICAgfTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJjb252ZXJzYXRpb25zXCIpLmZpbmRPbmUocXVlcnkpO1xuICAgIGNvbnN0IHsgaWQgfSA9IHJlc3VsdDtcbiAgICByZXR1cm4geyBpZCB9O1xuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gZmluZEFsbCgpIHtcbiAgICBjb25zdCBkYiA9IGF3YWl0IG1ha2VEYigpO1xuXG4gICAgY29uc3QgcXVlcnkgPSB7XG4gICAgICBhdHRyaWJ1dGVzOiBbXCJpZFwiLCBcInVzZXJPbmVJZFwiLCBcInVzZXJUd29JZFwiXVxuICAgIH07XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKFwiY29udmVyc2F0aW9uc1wiKS5maW5kQWxsKHF1ZXJ5KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcmV0dXJuIE9iamVjdC5mcmVlemUoe1xuICAgIGZpbmRPbmUsXG4gICAgZmluZEFsbFxuICB9KTtcbn1cbiJdfQ==